(function(a,r){a.fn.po=function(h){var f=a.extend({},{container:"body",alignment:"center",modal:!1,belowSelector:!1},h);if(f.modal){if("function"===typeof a.pjax)a(document).on("pjax:end",function(){var c=a("[id*=modal-container_]");c.length&&c.remove()});a(f.container).on("click",this.selector,function(){function c(){var a=d.outerWidth(!0),b=d.outerHeight(!0);d.css({"margin-top":-b/2,"margin-left":-a/2})}var b=a(this).data("layer-id");a("#modal-container_"+b).length||a('<div id="modal-container_'+
b+'" class="po__modal"></div>').appendTo("body");var d=a("#"+b),e=a("#modal-container_"+b);""===e.html()&&(c(),d.appendTo(e));e.addClass("is-active");a("html,body").css("overflow","hidden");setTimeout(function(){e.on("click",function(){a(this).removeClass("is-active");a("html,body").css("overflow","")});d.on("click",function(a){a.stopPropagation()})},0)})}else a(f.container).on("click",this.selector,function(){var c=a(this),b=a("#"+c.data("layer-id"));if(b.hasClass("is-active"))b.removeClass("is-active");
else{var d=c.outerHeight(!0),e=c.outerWidth(!0),k=b.outerWidth(!0),l=b.outerHeight(!0),h=c.offset().top,m=c.position().top,g=c.position().left,p=a(window).scrollTop(),q=a(window).height(),n={_top:function(){return p+q-(h+d)>l?m+d+10:m-l-10},_left:function(){switch(f.alignment){case "left":return g;case "right":return g+e-k;case "center":return g+e-(e/2+k/2);default:return g}}};setTimeout(function(){b.addClass("is-active");b.css({top:n._top(),left:n._left()});a(window).on("click",function(){b.removeClass("is-active")});
b.on("click",function(b){a(b.target).is("a")||b.stopPropagation()})},0)}})}})(jQuery);
